# تحليل الأسماء - ميزة جديدة

## الوصف
تم إضافة ميزة جديدة لتحليل الأسماء في عمود الملاحظات. هذه الميزة تقوم بـ:

## كيفية العمل

### 1. استخراج الأسماء
- يقوم النظام بمسح عمود الملاحظات بحثاً عن أسماء الأشخاص
- يتم تنظيف النص وإزالة الكلمات غير الضرورية مثل:
  - عجز، خدمة، خدمات
  - مدين، دائن، سلف، مشتريات
  - الأرقام والرموز
- يستخرج الأسماء (كلمتين أو أكثر) من كل سطر

### 2. تحديد الاسم الأصلي
- يعد تكرار كل اسم في الملاحظات
- الاسم الأكثر تكراراً يُعتبر "الاسم الأصلي"
- مثال: إذا ظهر "شرين رمضان" 50 مرة و"أحمد محمد" 3 مرات، فإن "شرين رمضان" هو الاسم الأصلي

### 3. تحديد الأسماء المختلفة
- أي أسماء أخرى غير الاسم الأصلي تُعتبر "أسماء مختلفة"
- كل اسم مختلف يحصل على مربع منفصل

### 4. حساب الإجماليات
لكل اسم (أصلي أو مختلف) يتم حساب:
- **المدين**: مجموع جميع المبالغ المدينة المرتبطة بهذا الاسم
- **الدائن**: مجموع جميع المبالغ الدائنة المرتبطة بهذا الاسم
- **الصافي**: الفرق بين المدين والدائن (مدين - دائن)
- **عدد العمليات**: عدد المرات التي ظهر فيها هذا الاسم

## التصميم البصري

### الاسم الأصلي
- يظهر في مربع بلون أزرق
- يحمل علامة "(الاسم الأصلي)"

### الأسماء المختلفة
- تظهر في مربعات بلون برتقالي
- تحمل علامة "(اسم مختلف)"

## أمثلة عملية

### مثال 1: اسم واحد فقط
إذا كان جميع الصفوف تحتوي على "شرين رمضان":
- سيظهر مربع واحد للاسم الأصلي "شرين رمضان"
- لن تظهر أسماء مختلفة

### مثال 2: اسم أصلي + أسماء مختلفة
إذا كان لديك:
- "شرين رمضان" يظهر 45 مرة
- "أحمد محمد" يظهر 3 مرات
- "فاطمة علي" يظهر 2 مرة

سيظهر:
- مربع أزرق: "شرين رمضان (الاسم الأصلي)"
- مربع برتقالي: "أحمد محمد (اسم مختلف)"
- مربع برتقالي: "فاطمة علي (اسم مختلف)"

### مثال 3: لا توجد أسماء واضحة
إذا لم يستطع النظام استخراج أسماء واضحة:
- لن يظهر قسم "تحليل الأسماء"

## فوائد هذه الميزة

1. **رصد التشغيل**: معرفة مَن الشخص الذي يشغل الحساب بشكل أساسي
2. **كشف الاستثناءات**: تحديد العمليات التي تمت بأسماء مختلفة
3. **المراجعة والتدقيق**: سهولة مراجعة العمليات حسب الأشخاص
4. **التحليل المالي**: معرفة الوضع المالي لكل شخص على حدة

## متطلبات البيانات

لضمان عمل الميزة بشكل صحيح:
- يجب أن تحتوي الملاحظات على أسماء واضحة (كلمتين على الأقل)
- تجنب استخدام اختصارات أو رموز بدلاً من الأسماء الكاملة
- كلما كانت البيانات أكثر اتساقاً، كانت النتائج أكثر دقة

## استكشاف الأخطاء

### إذا لم تظهر الأسماء
- تأكد أن عمود الملاحظات يحتوي على أسماء كاملة
- تأكد أن الأسماء مكتوبة بوضوح وليست مختلطة برقام أو رموز كثيرة

### إذا كانت الأسماء غير دقيقة
- راجع كتابة الأسماء في عمود الملاحظات
- تأكد من عدم وجود أخطاء إملائية أو تباين في كتابة الاسم نفسه

## المطور
تم تطوير هذه الميزة بواسطة MiniMax Agent